<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ella AI Chatbot</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      background: linear-gradient(145deg, #0f0c29, #302b63, #24243e);
      font-family: 'Orbitron', sans-serif;
      color: #f8f8f8;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    .chat-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 360px;
      max-width: 90%;
      background: rgba(20, 20, 40, 0.8);
      border: 2px solid #8e44ec;
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(142, 68, 236, 0.5);
      padding: 20px;
    }

    model-viewer {
      width: 300px;
      height: 300px;
      margin-bottom: -30px;
    }

    #chatbox {
      width: 100%;
      height: 300px;
      background: #1e1e2f;
      border: none;
      border-radius: 12px;
      padding: 10px;
      overflow-y: auto;
      font-size: 0.9rem;
      line-height: 1.4;
    }

    #userInput {
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #8e44ec;
      background: #292942;
      color: #f0f0f0;
    }

    button {
      margin-top: 10px;
      padding: 8px 20px;
      border: none;
      border-radius: 8px;
      background-color: #8e44ec;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #a763f5;
    }

    .message {
      margin: 5px 0;
    }

    .user {
      color: #7ed6df;
    }

    .ella {
      color: #f0932b;
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <!-- Avatar Model -->
    <model-viewer 
      src="ella.glb" 
      alt="Ella Avatar" 
      auto-rotate 
      camera-controls 
      disable-zoom
      shadow-intensity="1"
      exposure="1"
      interaction-prompt="none"
    ></model-viewer>

    <!-- Chat Box -->
    <div id="chatbox"></div>
    <input id="userInput" type="text" placeholder="Type your message..." />
    <button onclick="sendMessage()">Send</button>
  </div>

  <script>
    const chatbox = document.getElementById("chatbox");
    const userInput = document.getElementById("userInput");

    const responses = [
      "Hey, I’m Ella. Need help with your goals?",
      "Let’s take a breath and reset. What's on your mind?",
      "I'm here. What can I do for you today?",
      "One step at a time — I’ve got your back.",
      "Let’s focus on what you can control.",
      "Tell me what’s been challenging lately.",
      "Discipline and rest go hand-in-hand.",
      "I’m your mirror. What do you need to hear?",
      "We build progress, not perfection.",
      "Want a wellness tip or mindset reset?",
    ];

    function sendMessage() {
      const input = userInput.value.trim();
      if (input === "") return;

      const userMsg = document.createElement("div");
      userMsg.className = "message user";
      userMsg.innerText = "You: " + input;
      chatbox.appendChild(userMsg);

      const ellaReply = document.createElement("div");
      ellaReply.className = "message ella";
      ellaReply.innerText = "Ella: " + responses[Math.floor(Math.random() * responses.length)];
      chatbox.appendChild(ellaReply);

      userInput.value = "";
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    userInput.addEventListener("keypress", function (e) {
      if (e.key === "Enter") sendMessage();
    });
  </script>
</body>
</html>
